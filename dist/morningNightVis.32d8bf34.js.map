{"version":3,"sources":["morningNightVis.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["drawMorningNightVis","svgClass","timeData","email","svg","d3","select","height","attr","width","drawTitle","graphAttr","x","padding","y","yIncrement","verticalPadding","horizontalPadding","morningNightGraph","append","dateTimeParser","timeParse","timeMap","timeMoodAverageMap","i","forEach","d","record","dateTime","keys","time","hour","getHours","hourFromFive","push","moodYScale","scaleLinear","domain","moodToScore","range","timeXScale","scaleTime","reverseTimeScale","console","log","myData","morningNight","find","iconSize","Object","timeSegments","key","timeSegment","timeList","start","end","flat","averageMoodScore","getAverageFromList","map","mood","averageMood","scoreToMood","Math","round","mostFrequentAttitudeCount","max","attitudeList","a","attitude","attitudeShorttoLong","filter","length","mostFrequentAttitude","colorHexArray","style","dashArray","image","drawText","title","moodList","fill","textAnchor","fontWeight","lineGen","line","curve","curveMonotoneX","morningPoints","nightPoints","morningListForHour","nightListForHour","morningAverage","nightAverage","morning","night","sortTime","b","sort","morningData","nightData","greyColor","morningLegendAttr","nightLegendAttr","min","baseAnnotationY","annotation","hoverCircleRadius","morningCircle","nightCircle","hoverSunIcon","hoverMoonIcon","hoverRect","tooltipId","tooltip","addTooltip","on","event","clientX","target","getBoundingClientRect","left","morningMoodAverage","nightMoodAverage","tooltipText","morningY","nightY","abs","html","pageY","pageX","document","getElementById","clientWidth","drawMoodHalfLegend","drawAttitudeHalfLegend","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAKA,SAASA,mBAAT,CAA6BC,QAA7B,EAAuCC,QAAvC,EAA+D;AAAA,MAAdC,KAAc,uEAAN,IAAM;AAC3D,MAAIC,GAAG,GAAGC,EAAE,CAACC,MAAH,CAAUL,QAAV,CAAV;AACA,MAAIM,MAAM,GAAGH,GAAG,CAACI,IAAJ,CAAS,QAAT,CAAb;AACA,MAAIC,KAAK,GAAGL,GAAG,CAACI,IAAJ,CAAS,OAAT,CAAZ;AACAE,EAAAA,SAAS,CAACN,GAAD,EAAM,0BAAN,CAAT;AAEA,MAAIO,SAAS,GAAG;AACZC,IAAAA,CAAC,EAAEC,OADS;AAEZC,IAAAA,CAAC,EAAE,EAFS;AAGZC,IAAAA,UAAU,EAAE,EAHA;AAIZR,IAAAA,MAAM,EAAEA,MAAM,GAAG,IAAIM,OAJT;AAKZJ,IAAAA,KAAK,EAAEA,KAAK,GAAG,IAAII,OALP;AAMZG,IAAAA,eAAe,EAAE,EANL;AAOZC,IAAAA,iBAAiB,EAAE;AAPP,GAAhB;AAUA,MAAIC,iBAAiB,GAAGd,GAAG,CAACe,MAAJ,CAAW,GAAX,EACnBX,IADmB,CACd,WADc,EACD,eAAeG,SAAS,CAACC,CAAzB,GAA6B,IAA7B,GAAoCD,SAAS,CAACG,CAA9C,GAAkD,GADjD,CAAxB;AAGA,MAAIM,cAAc,GAAGf,EAAE,CAACgB,SAAH,CAAa,mBAAb,CAArB,CAnB2D,CAqB3D;;AACA,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,kBAAkB,GAAG,EAAzB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzBF,IAAAA,OAAO,CAACE,CAAD,CAAP,GAAa,EAAb;AACAD,IAAAA,kBAAkB,CAACC,CAAD,CAAlB,GAAwB,EAAxB;AACH;;AACDtB,EAAAA,QAAQ,CAACuB,OAAT,CAAiB,UAAAC,CAAC,EAAI;AAClB,QAAIC,MAAM,GAAGD,CAAb;AACA,QAAIE,QAAQ,GAAGR,cAAc,CAACM,CAAC,CAACG,IAAI,CAACC,IAAL,CAAUF,QAAX,CAAF,CAA7B;AACAD,IAAAA,MAAM,CAACC,QAAP,GAAkBA,QAAlB;AACA,QAAIG,IAAI,GAAGH,QAAQ,CAACI,QAAT,EAAX;AACA,QAAIC,YAAY,GAAGF,IAAI,GAAG,CAAP,GAAY,KAAKA,IAAjB,GAA0BA,IAAI,GAAG,CAApD;AACAJ,IAAAA,MAAM,CAACM,YAAP,GAAsBA,YAAtB;AACAX,IAAAA,OAAO,CAACW,YAAD,CAAP,CAAsBC,IAAtB,CAA2BP,MAA3B;AACH,GARD,EA5B2D,CAsC3D;;AACA,MAAIQ,UAAU,GAAG9B,EAAE,CAAC+B,WAAH,GACZC,MADY,CACL,CAACC,WAAW,CAAC,OAAD,CAAZ,EAAuBA,WAAW,CAAC,SAAD,CAAlC,CADK,EAEZC,KAFY,CAEN,CAAC5B,SAAS,CAACJ,MAAV,GAAmB,IAAII,SAAS,CAACK,eAAlC,EAAmDL,SAAS,CAACK,eAA7D,CAFM,CAAjB;AAIA,MAAIwB,UAAU,GAAGnC,EAAE,CAACoC,SAAH,GACZJ,MADY,CACL,CAAC,CAAD,EAAI,EAAJ,CADK,EAEZE,KAFY,CAEN,CAAC5B,SAAS,CAACM,iBAAX,EAA8BN,SAAS,CAACF,KAAV,GAAkB,MAAME,SAAS,CAACM,iBAAhE,CAFM,CAAjB;AAIA,MAAIyB,gBAAgB,GAAGrC,EAAE,CAACoC,SAAH,GAClBJ,MADkB,CACX,CAAC1B,SAAS,CAACM,iBAAX,EAA8BN,SAAS,CAACF,KAAV,GAAkB,MAAME,SAAS,CAACM,iBAAhE,CADW,EAElBsB,KAFkB,CAEZ,CAAC,CAAD,EAAI,EAAJ,CAFY,CAAvB;AAIAI,EAAAA,OAAO,CAACC,GAAR,CAAY1C,QAAZ;AAEA,MAAI2C,MAAM,GAAG,IAAb;;AACA,MAAI1C,KAAK,IAAI,IAAb,EAAmB;AACf0C,IAAAA,MAAM,GAAG;AACLC,MAAAA,YAAY,EAAE5C,QAAQ,CAAC6C,IAAT,CAAc,UAAArB,CAAC,EAAI;AAAE,eAAOA,CAAC,CAACG,IAAI,CAACC,IAAL,CAAU3B,KAAX,CAAD,IAAsBA,KAA7B;AAAoC,OAAzD,EAA2D0B,IAAI,CAACC,IAAL,CAAUgB,YAArE;AADT,KAAT;AAGH,GA1D0D,CA4D3D;;;AACA,MAAIE,QAAQ,GAAG,EAAf;AACAC,EAAAA,MAAM,CAACpB,IAAP,CAAYqB,YAAZ,EAA0BzB,OAA1B,CAAkC,UAAA0B,GAAG,EAAI;AACrC,QAAIC,WAAW,GAAGF,YAAY,CAACC,GAAD,CAA9B,CADqC,CAGrC;;AACA,QAAIE,QAAQ,GAAG,EAAf;AACAJ,IAAAA,MAAM,CAACpB,IAAP,CAAYP,OAAZ,EAAqBG,OAArB,CAA6B,UAAAQ,YAAY,EAAI;AACzC,UAAIA,YAAY,IAAImB,WAAW,CAACE,KAA5B,IAAqCrB,YAAY,IAAImB,WAAW,CAACG,GAArE,EAA0E;AACtEF,QAAAA,QAAQ,CAACnB,IAAT,CAAcZ,OAAO,CAACW,YAAD,CAArB;AACH;AACJ,KAJD;AAKAoB,IAAAA,QAAQ,GAAGA,QAAQ,CAACG,IAAT,EAAX;AAEA,QAAIC,gBAAgB,GAAGC,kBAAkB,CAACL,QAAQ,CAACM,GAAT,CAAa,UAAAjC,CAAC,EAAI;AAAE,aAAOY,WAAW,CAACZ,CAAC,CAACG,IAAI,CAACC,IAAL,CAAU8B,IAAX,CAAF,CAAlB;AAAuC,KAA3D,CAAD,CAAzC;AACA,QAAIC,WAAW,GAAGC,WAAW,CAACC,IAAI,CAACC,KAAL,CAAWP,gBAAX,CAAD,CAA7B;AACA,QAAIQ,yBAAyB,GAAG5D,EAAE,CAAC6D,GAAH,CAAOC,YAAP,EAAqB,UAAAC,CAAC,EAAI;AACtD,UAAIC,QAAQ,GAAGC,mBAAmB,CAACF,CAAD,CAAlC;AACA,aAAOf,QAAQ,CAACkB,MAAT,CAAgB,UAAA7C,CAAC,EAAI;AAAE,eAAOA,CAAC,CAACG,IAAI,CAACC,IAAL,CAAUuC,QAAX,CAAD,IAAyBA,QAAhC;AAA0C,OAAjE,EAAmEG,MAA1E;AACH,KAH+B,CAAhC;AAIA,QAAIC,oBAAoB,GAAGH,mBAAmB,CAACH,YAAY,CAACpB,IAAb,CAAkB,UAAAqB,CAAC,EAAI;AAClE,UAAIC,QAAQ,GAAGC,mBAAmB,CAACF,CAAD,CAAlC;AACA,aAAOf,QAAQ,CAACkB,MAAT,CAAgB,UAAA7C,CAAC,EAAI;AAAE,eAAOA,CAAC,CAACG,IAAI,CAACC,IAAL,CAAUuC,QAAX,CAAD,IAAyBA,QAAhC;AAA0C,OAAjE,EAAmEG,MAAnE,IAA6EP,yBAApF;AACH,KAH8C,CAAD,CAA9C,CAlBqC,CAuBrC;AACA;AACA;AACA;AAEA;;AACA/C,IAAAA,iBAAiB,CAACC,MAAlB,CAAyB,MAAzB,EACKX,IADL,CACU,IADV,EACgBgC,UAAU,CAACY,WAAW,CAACE,KAAb,CAD1B,EAEK9C,IAFL,CAEU,IAFV,EAEgBgC,UAAU,CAACY,WAAW,CAACE,KAAb,CAF1B,EAGK9C,IAHL,CAGU,IAHV,EAGgB,CAHhB,EAIKA,IAJL,CAIU,IAJV,EAIgBG,SAAS,CAACJ,MAAV,GAAmBI,SAAS,CAACK,eAA7B,GAA+CgC,QAAQ,GAAG,CAJ1E,EAKKxC,IALL,CAKU,QALV,EAKoBkE,aAAa,CAACb,WAAD,CALjC,EAMKc,KANL,CAMW,kBANX,EAM+BC,SAAS,CAACH,oBAAD,CANxC,EAOKjE,IAPL,CAOU,cAPV,EAO0B,CAP1B,EAQKmE,KARL,CAQW,gBARX,EAQ6B,OAR7B,EA7BqC,CAuCrC;;AACAzD,IAAAA,iBAAiB,CAACC,MAAlB,CAAyB,OAAzB,EACKX,IADL,CACU,YADV,EACwB,YAAY4C,WAAW,CAACyB,KAAxB,GAAgC,MADxD,EAEKrE,IAFL,CAEU,GAFV,EAEegC,UAAU,CAACY,WAAW,CAACE,KAAb,CAAV,GAAgCN,QAAQ,GAAG,CAF1D,EAGKxC,IAHL,CAGU,GAHV,EAGeG,SAAS,CAACJ,MAAV,GAAmBI,SAAS,CAACK,eAA7B,GAA+CgC,QAAQ,GAAG,CAHzE,EAIKxC,IAJL,CAIU,OAJV,EAImBwC,QAJnB,EAKKxC,IALL,CAKU,QALV,EAKoBwC,QALpB,EAxCqC,CA+CrC;;AACA8B,IAAAA,QAAQ,CAAC5D,iBAAD,EAAoBkC,WAAW,CAAC2B,KAAhC,EAAuC;AAC3CnE,MAAAA,CAAC,EAAE4B,UAAU,CAACY,WAAW,CAACE,KAAb,CAD8B;AAE3CxC,MAAAA,CAAC,EAAEH,SAAS,CAACJ;AAF8B,KAAvC,CAAR;AAIH,GApDD,EA9D2D,CAoH3D;;AACAyE,EAAAA,QAAQ,CAACvD,OAAT,CAAiB,UAAAmC,IAAI,EAAI;AACrBkB,IAAAA,QAAQ,CAAC5D,iBAAD,EAAoB0C,IAApB,EAA0B;AAC9BhD,MAAAA,CAAC,EAAE,CAD2B;AAE9BE,MAAAA,CAAC,EAAEqB,UAAU,CAACG,WAAW,CAACsB,IAAD,CAAZ,CAFiB;AAG9BqB,MAAAA,IAAI,EAAEP,aAAa,CAACd,IAAD,CAHW;AAI9BsB,MAAAA,UAAU,EAAE,KAJkB;AAK9BC,MAAAA,UAAU,EAAE;AALkB,KAA1B,CAAR;AAOH,GARD,EArH2D,CA+H3D;;AACA,MAAIC,OAAO,GAAG/E,EAAE,CAACgF,IAAH,GACTC,KADS,CACHjF,EAAE,CAACkF,cADA,CAAd,CAhI2D,CAmI3D;;AACA,MAAIC,aAAa,GAAG,EAApB;AACA,MAAIC,WAAW,GAAG,EAAlB;AAEAxC,EAAAA,MAAM,CAACpB,IAAP,CAAYP,OAAZ,EAAqBG,OAArB,CAA6B,UAAAQ,YAAY,EAAI;AACzC,QAAIrB,CAAC,GAAG4B,UAAU,CAACP,YAAD,CAAlB;AACA,QAAIoB,QAAQ,GAAG/B,OAAO,CAACW,YAAD,CAAtB;AACA,QAAIyD,kBAAkB,GAAGrC,QAAQ,CAACkB,MAAT,CAAgB,UAAA7C,CAAC,EAAI;AAAE,aAAOA,CAAC,CAACG,IAAI,CAACC,IAAL,CAAUgB,YAAX,CAAD,IAA6B,SAApC;AAA+C,KAAtE,EACpBa,GADoB,CAChB,UAAAjC,CAAC,EAAI;AAAE,aAAOY,WAAW,CAACZ,CAAC,CAACG,IAAI,CAACC,IAAL,CAAU8B,IAAX,CAAF,CAAlB;AAAuC,KAD9B,CAAzB;AAEA,QAAI+B,gBAAgB,GAAGtC,QAAQ,CAACkB,MAAT,CAAgB,UAAA7C,CAAC,EAAI;AAAE,aAAOA,CAAC,CAACG,IAAI,CAACC,IAAL,CAAUgB,YAAX,CAAD,IAA6B,SAApC;AAA+C,KAAtE,EAClBa,GADkB,CACd,UAAAjC,CAAC,EAAI;AAAE,aAAOY,WAAW,CAACZ,CAAC,CAACG,IAAI,CAACC,IAAL,CAAU8B,IAAX,CAAF,CAAlB;AAAuC,KADhC,CAAvB;AAGA,QAAIgC,cAAc,GAAGF,kBAAkB,CAAClB,MAAnB,GAA4B,CAA5B,GAAgCd,kBAAkB,CAACgC,kBAAD,CAAlD,GAAyEpD,WAAW,CAAC,IAAD,CAAzG;AACAkD,IAAAA,aAAa,CAACtD,IAAd,CAAmB,CAACtB,CAAD,EAAIuB,UAAU,CAACyD,cAAD,CAAd,CAAnB;AACA,QAAIC,YAAY,GAAGF,gBAAgB,CAACnB,MAAjB,GAA0B,CAA1B,GAA8Bd,kBAAkB,CAACiC,gBAAD,CAAhD,GAAqErD,WAAW,CAAC,IAAD,CAAnG;AACAmD,IAAAA,WAAW,CAACvD,IAAZ,CAAiB,CAACtB,CAAD,EAAIuB,UAAU,CAAC0D,YAAD,CAAd,CAAjB;AAEAtE,IAAAA,kBAAkB,CAACU,YAAD,CAAlB,GAAmC;AAC/B6D,MAAAA,OAAO,EAAEF,cADsB;AAE/BG,MAAAA,KAAK,EAAEF;AAFwB,KAAnC;AAIH,GAjBD;;AAmBA,WAASG,QAAT,CAAkB5B,CAAlB,EAAqB6B,CAArB,EAAwB;AACpB,WAAO7B,CAAC,CAAC,CAAD,CAAD,GAAO6B,CAAC,CAAC,CAAD,CAAR,GAAc,CAAC,CAAf,GAAmB,CAA1B;AACH;;AACDT,EAAAA,aAAa,CAACU,IAAd,CAAmBF,QAAnB;AACAP,EAAAA,WAAW,CAACS,IAAZ,CAAiBF,QAAjB,EA9J2D,CAgK3D;;AACA,MAAIG,WAAW,GAAGf,OAAO,CAACI,aAAD,CAAzB;AACA,MAAIY,SAAS,GAAGhB,OAAO,CAACK,WAAD,CAAvB;AACAvE,EAAAA,iBAAiB,CAACC,MAAlB,CAAyB,MAAzB,EACKX,IADL,CACU,GADV,EACe2F,WADf,EAEK3F,IAFL,CAEU,MAFV,EAEkB,MAFlB,EAGKA,IAHL,CAGU,QAHV,EAGoB6F,SAHpB,EAIK7F,IAJL,CAIU,cAJV,EAI0B,CAJ1B,EAKKmE,KALL,CAKW,gBALX,EAK6B,OAL7B;AAMAzD,EAAAA,iBAAiB,CAACC,MAAlB,CAAyB,MAAzB,EACKX,IADL,CACU,GADV,EACe4F,SADf,EAEK5F,IAFL,CAEU,MAFV,EAEkB,MAFlB,EAGKA,IAHL,CAGU,QAHV,EAGoB6F,SAHpB,EAIK7F,IAJL,CAIU,cAJV,EAI0B,CAJ1B,EAKKmE,KALL,CAKW,gBALX,EAK6B,OAL7B,EAzK2D,CAgL3D;;AACA,MAAI2B,iBAAiB,GAAG;AACpB1F,IAAAA,CAAC,EAAE4E,aAAa,CAACA,aAAa,CAAChB,MAAd,GAAuB,CAAxB,CAAb,CAAwC,CAAxC,IAA6C,EAD5B;AAEpB1D,IAAAA,CAAC,EAAE0E,aAAa,CAACA,aAAa,CAAChB,MAAd,GAAuB,CAAxB,CAAb,CAAwC,CAAxC,IAA6CxB,QAAQ,GAAG;AAFvC,GAAxB;AAIA,MAAIuD,eAAe,GAAG;AAClB3F,IAAAA,CAAC,EAAE6E,WAAW,CAACA,WAAW,CAACjB,MAAZ,GAAqB,CAAtB,CAAX,CAAoC,CAApC,IAAyC,EAD1B;AAElB1D,IAAAA,CAAC,EAAE2E,WAAW,CAACA,WAAW,CAACjB,MAAZ,GAAqB,CAAtB,CAAX,CAAoC,CAApC,IAAyCxB,QAAQ,GAAG;AAFrC,GAAtB;AAIA9B,EAAAA,iBAAiB,CAACC,MAAlB,CAAyB,OAAzB,EACKX,IADL,CACU,YADV,EACwB,oBADxB,EAEKA,IAFL,CAEU,GAFV,EAEe8F,iBAAiB,CAAC1F,CAFjC,EAGKJ,IAHL,CAGU,GAHV,EAGe8F,iBAAiB,CAACxF,CAHjC,EAIKN,IAJL,CAIU,OAJV,EAImBwC,QAJnB,EAKKxC,IALL,CAKU,QALV,EAKoBwC,QALpB;AAMA9B,EAAAA,iBAAiB,CAACC,MAAlB,CAAyB,OAAzB,EACKX,IADL,CACU,YADV,EACwB,kBADxB,EAEKA,IAFL,CAEU,GAFV,EAEe+F,eAAe,CAAC3F,CAF/B,EAGKJ,IAHL,CAGU,GAHV,EAGe+F,eAAe,CAACzF,CAH/B,EAIKN,IAJL,CAIU,OAJV,EAImBwC,QAJnB,EAKKxC,IALL,CAKU,QALV,EAKoBwC,QALpB;AAMA8B,EAAAA,QAAQ,CAAC5D,iBAAD,EAAoB,gBAApB,EAAsC;AAC1CN,IAAAA,CAAC,EAAE0F,iBAAiB,CAAC1F,CAAlB,GAAsBoC,QAAtB,GAAiC,EADM;AAE1ClC,IAAAA,CAAC,EAAEwF,iBAAiB,CAACxF,CAAlB,GAAsBkC,QAAQ,GAAG,CAFM;AAG1CkC,IAAAA,UAAU,EAAE;AAH8B,GAAtC,CAAR;AAKAJ,EAAAA,QAAQ,CAAC5D,iBAAD,EAAoB,cAApB,EAAoC;AACxCN,IAAAA,CAAC,EAAE2F,eAAe,CAAC3F,CAAhB,GAAoBoC,QAApB,GAA+B,EADM;AAExClC,IAAAA,CAAC,EAAEyF,eAAe,CAACzF,CAAhB,GAAoBkC,QAAQ,GAAG,CAFM;AAGxCkC,IAAAA,UAAU,EAAE;AAH4B,GAApC,CAAR;AAKAJ,EAAAA,QAAQ,CAAC5D,iBAAD,EAAoB,oCAApB,EAA0D;AAC9DN,IAAAA,CAAC,EAAE2F,eAAe,CAAC3F,CAD2C;AAE9DE,IAAAA,CAAC,EAAEiD,IAAI,CAACyC,GAAL,CAASF,iBAAiB,CAACxF,CAA3B,EAA8ByF,eAAe,CAACzF,CAA9C,IAAmD,EAFQ;AAG9DoE,IAAAA,UAAU,EAAE,OAHkD;AAI9DC,IAAAA,UAAU,EAAE;AAJkD,GAA1D,CAAR;AAOA,MAAIsB,eAAe,GAAGF,eAAe,CAACzF,CAAhB,GAAoBkC,QAApB,GAA+B,EAArD;AACA,MAAI0D,UAAU,GAAG,CAAC,iCAAD,EAAoC,eAApC,CAAjB;AACAA,EAAAA,UAAU,CAACjF,OAAX,CAAmB,UAAC4D,IAAD,EAAO7D,CAAP,EAAa;AAC5BsD,IAAAA,QAAQ,CAAC5D,iBAAD,EAAoBmE,IAApB,EAA0B;AAC9BzE,MAAAA,CAAC,EAAE2F,eAAe,CAAC3F,CADW;AAE9BE,MAAAA,CAAC,EAAE2F,eAAe,GAAG,KAAKjF,CAFI;AAG9B0D,MAAAA,UAAU,EAAE,OAHkB;AAI9BC,MAAAA,UAAU,EAAE;AAJkB,KAA1B,CAAR;AAMH,GAPD,EAxN2D,CAiO3D;;AACA,MAAIwB,iBAAiB,GAAG,CAAxB;AACA,MAAIC,aAAa,GAAG1F,iBAAiB,CAACC,MAAlB,CAAyB,QAAzB,EACfX,IADe,CACV,YADU,EACI,QADJ,EAEfA,IAFe,CAEV,QAFU,EAEA6F,SAFA,EAGf7F,IAHe,CAGV,GAHU,EAGLmG,iBAHK,CAApB;AAIA,MAAIE,WAAW,GAAG3F,iBAAiB,CAACC,MAAlB,CAAyB,QAAzB,EACbX,IADa,CACR,YADQ,EACM,QADN,EAEbA,IAFa,CAER,QAFQ,EAEE6F,SAFF,EAGb7F,IAHa,CAGR,GAHQ,EAGHmG,iBAHG,CAAlB;AAIA,MAAIG,YAAY,GAAG5F,iBAAiB,CAACC,MAAlB,CAAyB,OAAzB,EACdX,IADc,CACT,YADS,EACK,oBADL,EAEdA,IAFc,CAET,YAFS,EAEK,QAFL,EAGdA,IAHc,CAGT,OAHS,EAGAmG,iBAAiB,GAAG,CAHpB,EAIdnG,IAJc,CAIT,QAJS,EAICmG,iBAAiB,GAAG,CAJrB,CAAnB;AAKA,MAAII,aAAa,GAAG7F,iBAAiB,CAACC,MAAlB,CAAyB,OAAzB,EACfX,IADe,CACV,YADU,EACI,kBADJ,EAEfA,IAFe,CAEV,YAFU,EAEI,QAFJ,EAGfA,IAHe,CAGV,OAHU,EAGDmG,iBAAiB,GAAG,CAHnB,EAIfnG,IAJe,CAIV,QAJU,EAIAmG,iBAAiB,GAAG,CAJpB,CAApB;AAKA,MAAIK,SAAS,GAAG9F,iBAAiB,CAACC,MAAlB,CAAyB,MAAzB,EACXX,IADW,CACN,YADM,EACQ,QADR,EAEXA,IAFW,CAEN,MAFM,EAEE,WAFF,EAGXA,IAHW,CAGN,QAHM,EAGI6F,SAHJ,EAIX7F,IAJW,CAIN,IAJM,EAIAmG,iBAAiB,GAAG,CAJpB,CAAhB,CArP2D,CA2P3D;;AACA,MAAIM,SAAS,GAAG,0BAAhB;AACA,MAAIC,OAAO,GAAGC,UAAU,CAACF,SAAD,CAAxB;AAEA7G,EAAAA,GAAG,CAACe,MAAJ,CAAW,MAAX,EACKX,IADL,CACU,GADV,EACeG,SAAS,CAACC,CADzB,EAEKJ,IAFL,CAEU,GAFV,EAEeG,SAAS,CAACG,CAFzB,EAGKN,IAHL,CAGU,OAHV,EAGmBG,SAAS,CAACF,KAH7B,EAIKD,IAJL,CAIU,QAJV,EAIoBG,SAAS,CAACJ,MAJ9B,EAKKC,IALL,CAKU,SALV,EAKqB,CALrB,EAMK4G,EANL,CAMQ,WANR,EAMqB,YAAW;AACxB,QAAIxG,CAAC,GAAGP,EAAE,CAACgH,KAAH,CAASC,OAAT,GAAmBD,KAAK,CAACE,MAAN,CAAaC,qBAAb,GAAqCC,IAAhE;AACA,QAAIxF,YAAY,GAAG8B,IAAI,CAACC,KAAL,CAAWtB,gBAAgB,CAAC9B,CAAD,CAA3B,CAAnB;AACA,QAAImB,IAAI,GAAGE,YAAY,GAAG,CAA1B;;AACA,QAAIV,kBAAkB,CAACU,YAAD,CAAlB,IAAoC,IAAxC,EAA8C;AAC1C;AACH;;AACD,QAAI2D,cAAc,GAAGrE,kBAAkB,CAACU,YAAD,CAAlB,CAAiC6D,OAAtD;AACA,QAAID,YAAY,GAAGtE,kBAAkB,CAACU,YAAD,CAAlB,CAAiC8D,KAApD;AACA,QAAIjE,IAAI,GAAGC,IAAI,IAAI,EAAR,GAAa,MAAb,GACPA,IAAI,IAAI,EAAR,GAAa,MAAb,GACAA,IAAI,GAAG,EAAP,GAAYA,IAAI,GAAG,IAAnB,GACAA,IAAI,GAAG,EAAP,GAAaA,IAAI,GAAG,EAAR,GAAc,IAA1B,GAAkCA,IAAI,GAAG,EAAR,GAAc,IAHnD;AAIA,QAAI2F,kBAAkB,GAAG5D,WAAW,CAACC,IAAI,CAACC,KAAL,CAAW4B,cAAX,CAAD,CAApC;AACA,QAAI+B,gBAAgB,GAAG7D,WAAW,CAACC,IAAI,CAACC,KAAL,CAAW6B,YAAX,CAAD,CAAlC;AACA,QAAI+B,WAAW,GAAG,yBAAyB9F,IAAzB,GACd,2CADc,GAEdiC,IAAI,CAACC,KAAL,CAAWzC,kBAAkB,CAACU,YAAD,CAAlB,CAAiC6D,OAAjC,GAA2C,GAAtD,IAA6D,GAF/C,GAEqD,IAFrD,GAE4D4B,kBAF5D,GAEiF,GAFjF,GAGd,yCAHc,GAId3D,IAAI,CAACC,KAAL,CAAWzC,kBAAkB,CAACU,YAAD,CAAlB,CAAiC8D,KAAjC,GAAyC,GAApD,IAA2D,GAJ7C,GAImD,IAJnD,GAI0D4B,gBAJ1D,GAI6E,GAJ/F;;AAKA,QAAI9E,MAAM,IAAI,IAAd,EAAoB;AAChB+E,MAAAA,WAAW,IAAI,6CACV/E,MAAM,CAACC,YAAP,IAAuB,SAAvB,GAAmC,OAAnC,GAA6C,SADnC,IACgD,aAD/D;AAEH,KAvBuB,CAwBxB;;;AACA,QAAI+E,QAAQ,GAAG1F,UAAU,CAACyD,cAAD,CAAzB;AACA,QAAIkC,MAAM,GAAG3F,UAAU,CAAC0D,YAAD,CAAvB;AACAe,IAAAA,aAAa,CAACpG,IAAd,CAAmB,YAAnB,EAAiC,SAAjC,EACKA,IADL,CACU,IADV,EACgBgC,UAAU,CAACP,YAAD,CAD1B,EAEKzB,IAFL,CAEU,IAFV,EAEgBqH,QAFhB,EAGKrH,IAHL,CAGU,MAHV,EAGkBkE,aAAa,CAACgD,kBAAD,CAH/B;AAIAZ,IAAAA,YAAY,CAACtG,IAAb,CAAkB,YAAlB,EAAgC,SAAhC,EACKA,IADL,CACU,GADV,EACegC,UAAU,CAACP,YAAD,CAAV,GAA2B0E,iBAAiB,GAAG,CAApB,GAAwB,CADlE,EAEKnG,IAFL,CAEU,GAFV,EAEeqH,QAAQ,GAAG,CAAClB,iBAAiB,GAAG,CAApB,GAAwB,EAAzB,KAAgCkB,QAAQ,IAAIC,MAAZ,GAAqB,CAArB,GAAyB,CAAC,CAA1D,CAAX,GAA0EnB,iBAAiB,GAAG,CAApB,GAAwB,CAFjH;AAGAE,IAAAA,WAAW,CAACrG,IAAZ,CAAiB,YAAjB,EAA+B,SAA/B,EACKA,IADL,CACU,IADV,EACgBgC,UAAU,CAACP,YAAD,CAD1B,EAEKzB,IAFL,CAEU,IAFV,EAEgBsH,MAFhB,EAGKtH,IAHL,CAGU,MAHV,EAGkBkE,aAAa,CAACiD,gBAAD,CAH/B;AAIAZ,IAAAA,aAAa,CAACvG,IAAd,CAAmB,YAAnB,EAAiC,SAAjC,EACKA,IADL,CACU,GADV,EACegC,UAAU,CAACP,YAAD,CAAV,GAA2B0E,iBAD1C,EAEKnG,IAFL,CAEU,GAFV,EAEesH,MAAM,GAAG,CAACnB,iBAAiB,GAAG,CAApB,GAAwB,CAAzB,KAA+BmB,MAAM,GAAGD,QAAT,GAAoB,CAApB,GAAwB,CAAC,CAAxD,CAAT,GAAsElB,iBAFrF;AAGAK,IAAAA,SAAS,CAACxG,IAAV,CAAe,YAAf,EAA6B,SAA7B,EACKA,IADL,CACU,GADV,EACegC,UAAU,CAACP,YAAD,CAAV,IAA4B0E,iBAAiB,GAAG,CAAhD,CADf,EAEKnG,IAFL,CAEU,GAFV,EAEe2B,UAAU,CAACyD,cAAc,GAAGC,YAAjB,GAAgCD,cAAhC,GAAiDC,YAAlD,CAAV,IAA6Ec,iBAAiB,GAAG,CAAjG,CAFf,EAGKnG,IAHL,CAGU,QAHV,EAGoBuD,IAAI,CAACgE,GAAL,CAASF,QAAQ,GAAGC,MAApB,IAA8B,CAACnB,iBAAiB,GAAG,CAArB,IAA0B,CAH5E,EAIKnG,IAJL,CAIU,OAJV,EAImB,CAACmG,iBAAiB,GAAG,CAArB,IAA0B,CAJ7C,EAzCwB,CA8CxB;;AACAO,IAAAA,OAAO,CAACc,IAAR,CAAaJ,WAAb,EACKjD,KADL,CACW,YADX,EACyB,SADzB,EAEKA,KAFL,CAEW,KAFX,EAEkB0C,KAAK,CAACY,KAAN,GAAc,EAFhC,EAGKtD,KAHL,CAGW,MAHX,EAGmB,YAAW;AACtB,UAAItE,EAAE,CAACgH,KAAH,CAASC,OAAT,GAAmB,GAAvB,EAA4B;AACxB,eAAOD,KAAK,CAACa,KAAN,GAAc,EAAd,GAAmB,IAA1B;AACH,OAFD,MAEO;AACH,eAAOb,KAAK,CAACa,KAAN,GAAcC,QAAQ,CAACC,cAAT,CAAwBnB,SAAxB,EAAmCoB,WAAjD,GAA+D,EAA/D,GAAoE,IAA3E;AACH;AACJ,KATL;AAUH,GA/DL,EA+DOjB,EA/DP,CA+DU,UA/DV,EA+DsB,YAAW;AACzBR,IAAAA,aAAa,CAACpG,IAAd,CAAmB,YAAnB,EAAiC,QAAjC;AACAsG,IAAAA,YAAY,CAACtG,IAAb,CAAkB,YAAlB,EAAgC,QAAhC;AACAqG,IAAAA,WAAW,CAACrG,IAAZ,CAAiB,YAAjB,EAA+B,QAA/B;AACAuG,IAAAA,aAAa,CAACvG,IAAd,CAAmB,YAAnB,EAAiC,QAAjC;AACAwG,IAAAA,SAAS,CAACxG,IAAV,CAAe,YAAf,EAA6B,QAA7B;AACA0G,IAAAA,OAAO,CAACvC,KAAR,CAAc,YAAd,EAA4B,QAA5B;AACH,GAtEL,EA/P2D,CAuU3D;;AACA2D,EAAAA,kBAAkB,CAACrI,QAAD,EAAW,yDAAX,CAAlB;AACAsI,EAAAA,sBAAsB,CAACtI,QAAD,EAAWkE,YAAX,EAAyB,mDAAzB,CAAtB;AACH;;;AC/UD,IAAIqE,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGC,MAAM,CAACC,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BJ,EAAAA,SAAS,CAACK,IAAV,CAAe,IAAf,EAAqBD,UAArB;AACA,OAAKE,GAAL,GAAW;AACTC,IAAAA,IAAI,EAAEN,MAAM,CAACC,MAAP,CAAcM,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUC,EAAV,EAAc;AACpB,WAAKH,gBAAL,CAAsBhH,IAAtB,CAA2BmH,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTC,IAAAA,OAAO,EAAE,UAAUD,EAAV,EAAc;AACrB,WAAKF,iBAAL,CAAuBjH,IAAvB,CAA4BmH,EAA5B;AACD;AATQ,GAAX;AAYAX,EAAAA,MAAM,CAACC,MAAP,CAAcM,OAAd,GAAwB,IAAxB;AACD;;AAEDP,MAAM,CAACC,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIW,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGf,MAAM,CAACC,MAAP,CAAcc,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAAS3C,KAAT,EAAgB;AAC7BkC,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIR,IAAI,GAAGiB,IAAI,CAACC,KAAL,CAAW7C,KAAK,CAAC2B,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACmB,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIC,OAAO,GAAG,KAAd;AACApB,MAAAA,IAAI,CAACqB,MAAL,CAAY5I,OAAZ,CAAoB,UAAS6I,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACM,EAA7B,CAA9B;;AACA,cAAIJ,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAIpB,IAAI,CAACqB,MAAL,CAAYQ,KAAZ,CAAkB,UAASP,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACH,IAAN,KAAe,KAAf,IAAwBG,KAAK,CAACQ,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIX,OAAJ,EAAa;AACXzH,QAAAA,OAAO,CAACqI,KAAR;AAEAhC,QAAAA,IAAI,CAACqB,MAAL,CAAY5I,OAAZ,CAAoB,UAAU6I,KAAV,EAAiB;AACnCW,UAAAA,QAAQ,CAACP,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAd,QAAAA,cAAc,CAAC/H,OAAf,CAAuB,UAAUyJ,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIrB,QAAQ,CAACuB,MAAb,EAAqB;AAAE;AAC5BvB,QAAAA,QAAQ,CAACuB,MAAT;AACD;AACF;;AAED,QAAIpC,IAAI,CAACmB,IAAL,KAAc,QAAlB,EAA4B;AAC1BJ,MAAAA,EAAE,CAACsB,KAAH;;AACAtB,MAAAA,EAAE,CAACuB,OAAH,GAAa,YAAY;AACvBzB,QAAAA,QAAQ,CAACuB,MAAT;AACD,OAFD;AAGD;;AAED,QAAIpC,IAAI,CAACmB,IAAL,KAAc,gBAAlB,EAAoC;AAClCxH,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AAEA2I,MAAAA,kBAAkB;AACnB;;AAED,QAAIvC,IAAI,CAACmB,IAAL,KAAc,OAAlB,EAA2B;AACzBxH,MAAAA,OAAO,CAAC6I,KAAR,CAAc,kBAAkBxC,IAAI,CAACwC,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8CzC,IAAI,CAACwC,KAAL,CAAWE,KAAvE;AAEAH,MAAAA,kBAAkB;AAElB,UAAII,OAAO,GAAGC,kBAAkB,CAAC5C,IAAD,CAAhC;AACAb,MAAAA,QAAQ,CAAC0D,IAAT,CAAcC,WAAd,CAA0BH,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASJ,kBAAT,GAA8B;AAC5B,MAAII,OAAO,GAAGxD,QAAQ,CAACC,cAAT,CAAwBI,UAAxB,CAAd;;AACA,MAAImD,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACI,MAAR;AACD;AACF;;AAED,SAASH,kBAAT,CAA4B5C,IAA5B,EAAkC;AAChC,MAAI2C,OAAO,GAAGxD,QAAQ,CAAC6D,aAAT,CAAuB,KAAvB,CAAd;AACAL,EAAAA,OAAO,CAACf,EAAR,GAAapC,UAAb,CAFgC,CAIhC;;AACA,MAAIiD,OAAO,GAAGtD,QAAQ,CAAC6D,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAG9D,QAAQ,CAAC6D,aAAT,CAAuB,KAAvB,CAAjB;AACAP,EAAAA,OAAO,CAACS,SAAR,GAAoBlD,IAAI,CAACwC,KAAL,CAAWC,OAA/B;AACAQ,EAAAA,UAAU,CAACC,SAAX,GAAuBlD,IAAI,CAACwC,KAAL,CAAWE,KAAlC;AAEAC,EAAAA,OAAO,CAACQ,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EV,OAAO,CAACU,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOR,OAAP;AAED;;AAED,SAASS,UAAT,CAAoBzD,MAApB,EAA4BiC,EAA5B,EAAgC;AAC9B,MAAIyB,OAAO,GAAG1D,MAAM,CAAC0D,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAO7K,CAAP,EAAU8K,GAAV;;AAEA,OAAKD,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAK3K,CAAL,IAAU2K,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBC,MAAAA,GAAG,GAAGH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAc7K,CAAd,CAAN;;AACA,UAAI8K,GAAG,KAAK5B,EAAR,IAAe6B,KAAK,CAACC,OAAN,CAAcF,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAChI,MAAJ,GAAa,CAAd,CAAH,KAAwBoG,EAAjE,EAAsE;AACpE0B,QAAAA,OAAO,CAACpK,IAAR,CAAaqK,CAAb;AACD;AACF;AACF;;AAED,MAAI5D,MAAM,CAACc,MAAX,EAAmB;AACjB6C,IAAAA,OAAO,GAAGA,OAAO,CAACK,MAAR,CAAeP,UAAU,CAACzD,MAAM,CAACc,MAAR,EAAgBmB,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO0B,OAAP;AACD;;AAED,SAASrB,QAAT,CAAkBtC,MAAlB,EAA0B2B,KAA1B,EAAiC;AAC/B,MAAI+B,OAAO,GAAG1D,MAAM,CAAC0D,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAP,IAAqB,CAACjC,MAAM,CAACc,MAAjC,EAAyC;AACvC,QAAIJ,EAAE,GAAG,IAAIuD,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6CtC,KAAK,CAACQ,SAAN,CAAgBC,EAA7D,CAAT;AACAT,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC8B,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAtB;AACAyB,IAAAA,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAP,GAAoB,CAACvB,EAAD,EAAKiB,KAAK,CAACuC,IAAX,CAApB;AACD,GAJD,MAIO,IAAIlE,MAAM,CAACc,MAAX,EAAmB;AACxBwB,IAAAA,QAAQ,CAACtC,MAAM,CAACc,MAAR,EAAgBa,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB9B,MAAxB,EAAgCiC,EAAhC,EAAoC;AAClC,MAAIyB,OAAO,GAAG1D,MAAM,CAAC0D,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAACzB,EAAD,CAAR,IAAgBjC,MAAM,CAACc,MAA3B,EAAmC;AACjC,WAAOgB,cAAc,CAAC9B,MAAM,CAACc,MAAR,EAAgBmB,EAAhB,CAArB;AACD;;AAED,MAAIrB,aAAa,CAACqB,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDrB,EAAAA,aAAa,CAACqB,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAIkC,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAanC,EAAb,CAAb;AAEApB,EAAAA,cAAc,CAACtH,IAAf,CAAoB,CAACyG,MAAD,EAASiC,EAAT,CAApB;;AAEA,MAAIkC,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4B1E,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAO4H,UAAU,CAAC1B,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAAV,CAAqCoC,IAArC,CAA0C,UAAUpC,EAAV,EAAc;AAC7D,WAAOH,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASO,YAAT,CAAsBxC,MAAtB,EAA8BiC,EAA9B,EAAkC;AAChC,MAAIkC,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAanC,EAAb,CAAb;AACAjC,EAAAA,MAAM,CAACM,OAAP,GAAiB,EAAjB;;AACA,MAAI6D,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAAC/D,GAAP,CAAWC,IAAX,GAAkBL,MAAM,CAACM,OAAzB;AACD;;AAED,MAAI6D,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWI,iBAAX,CAA6B3E,MAAzD,EAAiE;AAC/DsI,IAAAA,MAAM,CAAC/D,GAAP,CAAWI,iBAAX,CAA6B1H,OAA7B,CAAqC,UAAUwL,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACtE,MAAM,CAACM,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAON,MAAM,CAACoE,KAAP,CAAanC,EAAb,CAAP;AACAjC,EAAAA,MAAM,CAACiC,EAAD,CAAN;AAEAkC,EAAAA,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAanC,EAAb,CAAT;;AACA,MAAIkC,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4B1E,MAAxD,EAAgE;AAC9DsI,IAAAA,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4BzH,OAA5B,CAAoC,UAAUwL,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"morningNightVis.32d8bf34.js","sourceRoot":"..","sourcesContent":["/**\n *   svgClass: tag for svg class, must include the '.'\n *   timeData: time data for records\n *   returns void, draws data vis for Morning vs. Night people\n */\nfunction drawMorningNightVis(svgClass, timeData, email = null) {\n    let svg = d3.select(svgClass);\n    let height = svg.attr('height');\n    let width = svg.attr('width');\n    drawTitle(svg, 'Morning vs. Night people');\n\n    let graphAttr = {\n        x: padding,\n        y: 90,\n        yIncrement: 56,\n        height: height - 5 * padding,\n        width: width - 2 * padding,\n        verticalPadding: 28,\n        horizontalPadding: 56\n    }\n\n    let morningNightGraph = svg.append(\"g\")\n        .attr(\"transform\", \"translate(\" + graphAttr.x + \", \" + graphAttr.y + \")\");\n\n    let dateTimeParser = d3.timeParse(\"%m/%d/%y %H:%M %p\");\n\n    // Setup maps.\n    let timeMap = {};\n    let timeMoodAverageMap = {};\n    for (let i = 0; i < 24; i++) {\n        timeMap[i] = [];\n        timeMoodAverageMap[i] = {};\n    }\n    timeData.forEach(d => {\n        let record = d;\n        let dateTime = dateTimeParser(d[keys.time.dateTime]);\n        record.dateTime = dateTime;\n        let hour = dateTime.getHours();\n        let hourFromFive = hour < 5 ? (19 + hour) : (hour - 5);\n        record.hourFromFive = hourFromFive;\n        timeMap[hourFromFive].push(record);\n    });\n\n    // Setup scales.\n    let moodYScale = d3.scaleLinear()\n        .domain([moodToScore[\"Awful\"], moodToScore[\"Amazing\"]])\n        .range([graphAttr.height - 2 * graphAttr.verticalPadding, graphAttr.verticalPadding]);\n\n    let timeXScale = d3.scaleTime()\n        .domain([0, 24])\n        .range([graphAttr.horizontalPadding, graphAttr.width - 3.5 * graphAttr.horizontalPadding]);\n\n    let reverseTimeScale = d3.scaleTime()\n        .domain([graphAttr.horizontalPadding, graphAttr.width - 3.5 * graphAttr.horizontalPadding])\n        .range([0, 24]);\n\n    console.log(timeData);\n\n    let myData = null;\n    if (email != null) {\n        myData = {\n            morningNight: timeData.find(d => { return d[keys.time.email] == email })[keys.time.morningNight]\n        }\n    }\n\n    // Draw bottom time labels.\n    let iconSize = 32;\n    Object.keys(timeSegments).forEach(key => {\n        let timeSegment = timeSegments[key];\n\n        // Get list of records for time segment interval.\n        let timeList = [];\n        Object.keys(timeMap).forEach(hourFromFive => {\n            if (hourFromFive >= timeSegment.start && hourFromFive <= timeSegment.end) {\n                timeList.push(timeMap[hourFromFive]);\n            }\n        });\n        timeList = timeList.flat();\n\n        let averageMoodScore = getAverageFromList(timeList.map(d => { return moodToScore[d[keys.time.mood]] }));\n        let averageMood = scoreToMood[Math.round(averageMoodScore)];\n        let mostFrequentAttitudeCount = d3.max(attitudeList, a => {\n            let attitude = attitudeShorttoLong[a];\n            return timeList.filter(d => { return d[keys.time.attitude] == attitude }).length;\n        });\n        let mostFrequentAttitude = attitudeShorttoLong[attitudeList.find(a => {\n            let attitude = attitudeShorttoLong[a];\n            return timeList.filter(d => { return d[keys.time.attitude] == attitude }).length == mostFrequentAttitudeCount;\n        })];\n\n        // console.log(mostFrequentAttitudeCount);\n        // console.log(mostFrequentAttitude);\n        // console.log(averageMoodScore);\n        // console.log(averageMood);\n\n        // Draw vertical line.\n        morningNightGraph.append(\"line\")\n            .attr(\"x1\", timeXScale(timeSegment.start))\n            .attr(\"x2\", timeXScale(timeSegment.start))\n            .attr(\"y1\", 0)\n            .attr(\"y2\", graphAttr.height - graphAttr.verticalPadding - iconSize / 2)\n            .attr(\"stroke\", colorHexArray[averageMood])\n            .style(\"stroke-dasharray\", dashArray[mostFrequentAttitude])\n            .attr(\"stroke-width\", 2)\n            .style(\"stroke-linecap\", \"round\");\n\n        // Draw clock image.\n        morningNightGraph.append(\"image\")\n            .attr(\"xlink:href\", \"images/\" + timeSegment.image + \".svg\")\n            .attr(\"x\", timeXScale(timeSegment.start) - iconSize / 2)\n            .attr(\"y\", graphAttr.height - graphAttr.verticalPadding - iconSize / 2)\n            .attr(\"width\", iconSize)\n            .attr(\"height\", iconSize);\n\n        // Draw time segment label.\n        drawText(morningNightGraph, timeSegment.title, {\n            x: timeXScale(timeSegment.start),\n            y: graphAttr.height\n        });\n    });\n\n    // Draw left mood text labels.\n    moodList.forEach(mood => {\n        drawText(morningNightGraph, mood, {\n            x: 0,\n            y: moodYScale(moodToScore[mood]),\n            fill: colorHexArray[mood],\n            textAnchor: \"end\",\n            fontWeight: \"bold\"\n        });\n    });\n\n    // Draw curves.\n    let lineGen = d3.line()\n        .curve(d3.curveMonotoneX);\n\n    // Generate morning and night people points.\n    let morningPoints = [];\n    let nightPoints = [];\n\n    Object.keys(timeMap).forEach(hourFromFive => {\n        let x = timeXScale(hourFromFive);\n        let timeList = timeMap[hourFromFive];\n        let morningListForHour = timeList.filter(d => { return d[keys.time.morningNight] == \"Morning\" })\n            .map(d => { return moodToScore[d[keys.time.mood]] });\n        let nightListForHour = timeList.filter(d => { return d[keys.time.morningNight] == \"Evening\" })\n            .map(d => { return moodToScore[d[keys.time.mood]] });\n\n        let morningAverage = morningListForHour.length > 0 ? getAverageFromList(morningListForHour) : moodToScore[\"Ok\"];\n        morningPoints.push([x, moodYScale(morningAverage)]);\n        let nightAverage = nightListForHour.length > 0 ? getAverageFromList(nightListForHour) : moodToScore[\"Ok\"];\n        nightPoints.push([x, moodYScale(nightAverage)]);\n\n        timeMoodAverageMap[hourFromFive] = {\n            morning: morningAverage,\n            night: nightAverage\n        };\n    });\n\n    function sortTime(a, b) {\n        return a[0] < b[0] ? -1 : 1;\n    }\n    morningPoints.sort(sortTime);\n    nightPoints.sort(sortTime);\n\n    // Draw path.\n    let morningData = lineGen(morningPoints);\n    let nightData = lineGen(nightPoints);\n    morningNightGraph.append(\"path\")\n        .attr(\"d\", morningData)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", greyColor)\n        .attr(\"stroke-width\", 2)\n        .style(\"stroke-linecap\", \"round\");\n    morningNightGraph.append(\"path\")\n        .attr(\"d\", nightData)\n        .attr(\"fill\", \"none\")\n        .attr(\"stroke\", greyColor)\n        .attr(\"stroke-width\", 2)\n        .style(\"stroke-linecap\", \"round\");\n\n    // Draw morning vs. night legend.\n    let morningLegendAttr = {\n        x: morningPoints[morningPoints.length - 1][0] + 12,\n        y: morningPoints[morningPoints.length - 1][1] - iconSize / 2\n    }\n    let nightLegendAttr = {\n        x: nightPoints[nightPoints.length - 1][0] + 12,\n        y: nightPoints[nightPoints.length - 1][1] - iconSize / 2\n    }\n    morningNightGraph.append(\"image\")\n        .attr(\"xlink:href\", \"images/morning.svg\")\n        .attr(\"x\", morningLegendAttr.x)\n        .attr(\"y\", morningLegendAttr.y)\n        .attr(\"width\", iconSize)\n        .attr(\"height\", iconSize);\n    morningNightGraph.append(\"image\")\n        .attr(\"xlink:href\", \"images/night.svg\")\n        .attr(\"x\", nightLegendAttr.x)\n        .attr(\"y\", nightLegendAttr.y)\n        .attr(\"width\", iconSize)\n        .attr(\"height\", iconSize);\n    drawText(morningNightGraph, \"Morning people\", {\n        x: morningLegendAttr.x + iconSize + 12,\n        y: morningLegendAttr.y + iconSize / 2,\n        textAnchor: \"start\"\n    });\n    drawText(morningNightGraph, \"Night people\", {\n        x: nightLegendAttr.x + iconSize + 12,\n        y: nightLegendAttr.y + iconSize / 2,\n        textAnchor: \"start\"\n    });\n    drawText(morningNightGraph, \"Are you a morning or night person?\", {\n        x: nightLegendAttr.x,\n        y: Math.min(morningLegendAttr.y, nightLegendAttr.y) - 24,\n        textAnchor: \"start\",\n        fontWeight: \"bold\"\n    });\n\n    let baseAnnotationY = nightLegendAttr.y + iconSize + 28;\n    let annotation = [\"Morning people are happier than\", \"night people.\"];\n    annotation.forEach((line, i) => {\n        drawText(morningNightGraph, line, {\n            x: nightLegendAttr.x,\n            y: baseAnnotationY + 16 * i,\n            textAnchor: \"start\",\n            fontWeight: \"bold\"\n        });\n    });\n\n    // Setup hover bar.\n    let hoverCircleRadius = 5;\n    let morningCircle = morningNightGraph.append(\"circle\")\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"stroke\", greyColor)\n        .attr(\"r\", hoverCircleRadius);\n    let nightCircle = morningNightGraph.append(\"circle\")\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"stroke\", greyColor)\n        .attr(\"r\", hoverCircleRadius);\n    let hoverSunIcon = morningNightGraph.append(\"image\")\n        .attr(\"xlink:href\", \"images/morning.svg\")\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"width\", hoverCircleRadius * 3)\n        .attr(\"height\", hoverCircleRadius * 3);\n    let hoverMoonIcon = morningNightGraph.append(\"image\")\n        .attr(\"xlink:href\", \"images/night.svg\")\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"width\", hoverCircleRadius * 2)\n        .attr(\"height\", hoverCircleRadius * 2);\n    let hoverRect = morningNightGraph.append(\"rect\")\n        .attr(\"visibility\", \"hidden\")\n        .attr(\"fill\", \"#c4c4c41a\")\n        .attr(\"stroke\", greyColor)\n        .attr(\"rx\", hoverCircleRadius + 2);\n\n    // Add tooltip.\n    let tooltipId = 'morningNightVisTooltipId';\n    let tooltip = addTooltip(tooltipId);\n\n    svg.append(\"rect\")\n        .attr(\"x\", graphAttr.x)\n        .attr(\"y\", graphAttr.y)\n        .attr(\"width\", graphAttr.width)\n        .attr(\"height\", graphAttr.height)\n        .attr(\"opacity\", 0)\n        .on(\"mousemove\", function() {\n            let x = d3.event.clientX - event.target.getBoundingClientRect().left;\n            let hourFromFive = Math.round(reverseTimeScale(x));\n            let hour = hourFromFive + 5;\n            if (timeMoodAverageMap[hourFromFive] == null) {\n                return;\n            }\n            let morningAverage = timeMoodAverageMap[hourFromFive].morning;\n            let nightAverage = timeMoodAverageMap[hourFromFive].night;\n            let time = hour == 12 ? \"12PM\" :\n                hour == 24 ? \"12AM\" :\n                hour < 12 ? hour + \"AM\" :\n                hour > 24 ? (hour - 24) + \"AM\" : (hour - 12) + \"PM\";\n            let morningMoodAverage = scoreToMood[Math.round(morningAverage)];\n            let nightMoodAverage = scoreToMood[Math.round(nightAverage)];\n            let tooltipText = \"<b>TIME OF DAY:</b> \" + time +\n                \"</br></br><b>MOOD AVERAGE (MORNING): </b>\" +\n                Math.round(timeMoodAverageMap[hourFromFive].morning * 100) / 100 + \" (\" + morningMoodAverage + \")\" +\n                \"</br></br><b>MOOD AVERAGE (NIGHT): </b>\" +\n                Math.round(timeMoodAverageMap[hourFromFive].night * 100) / 100 + \" (\" + nightMoodAverage + \")\";\n            if (myData != null) {\n                tooltipText += \"</br></br><b>YOU ARE A SELF-IDENTIFIED \" +\n                    (myData.morningNight == \"Evening\" ? \"NIGHT\" : \"MORNING\") + \" PERSON</b>\"\n            }\n            // Adjust and show hover bar.\n            let morningY = moodYScale(morningAverage);\n            let nightY = moodYScale(nightAverage);\n            morningCircle.attr(\"visibility\", \"visible\")\n                .attr(\"cx\", timeXScale(hourFromFive))\n                .attr(\"cy\", morningY)\n                .attr(\"fill\", colorHexArray[morningMoodAverage]);\n            hoverSunIcon.attr(\"visibility\", \"visible\")\n                .attr(\"x\", timeXScale(hourFromFive) - hoverCircleRadius * 3 / 2)\n                .attr(\"y\", morningY + (hoverCircleRadius + 2 + 10) * (morningY >= nightY ? 1 : -1) - hoverCircleRadius * 3 / 2);\n            nightCircle.attr(\"visibility\", \"visible\")\n                .attr(\"cx\", timeXScale(hourFromFive))\n                .attr(\"cy\", nightY)\n                .attr(\"fill\", colorHexArray[nightMoodAverage]);\n            hoverMoonIcon.attr(\"visibility\", \"visible\")\n                .attr(\"x\", timeXScale(hourFromFive) - hoverCircleRadius)\n                .attr(\"y\", nightY + (hoverCircleRadius + 2 + 8) * (nightY > morningY ? 1 : -1) - hoverCircleRadius);\n            hoverRect.attr(\"visibility\", \"visible\")\n                .attr(\"x\", timeXScale(hourFromFive) - (hoverCircleRadius + 2))\n                .attr(\"y\", moodYScale(morningAverage > nightAverage ? morningAverage : nightAverage) - (hoverCircleRadius + 2))\n                .attr(\"height\", Math.abs(morningY - nightY) + (hoverCircleRadius + 2) * 2)\n                .attr(\"width\", (hoverCircleRadius + 2) * 2);\n            // Show tooltip.\n            tooltip.html(tooltipText)\n                .style(\"visibility\", \"visible\")\n                .style(\"top\", event.pageY + 20)\n                .style(\"left\", function() {\n                    if (d3.event.clientX < 750) {\n                        return event.pageX + 20 + \"px\";\n                    } else {\n                        return event.pageX - document.getElementById(tooltipId).clientWidth - 20 + \"px\";\n                    }\n                })\n        }).on(\"mouseout\", function() {\n            morningCircle.attr(\"visibility\", \"hidden\");\n            hoverSunIcon.attr(\"visibility\", \"hidden\");\n            nightCircle.attr(\"visibility\", \"hidden\");\n            hoverMoonIcon.attr(\"visibility\", \"hidden\");\n            hoverRect.attr(\"visibility\", \"hidden\");\n            tooltip.style(\"visibility\", \"hidden\");\n        });\n\n    // Draw mood and attitude legend.\n    drawMoodHalfLegend(svgClass, \"Average mood for part of day for morning & night people\");\n    drawAttitudeHalfLegend(svgClass, attitudeList, \"Most frequent attitude for morning & night people\");\n}","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}